Ropeで高速文字列結合の夢は見れるか

先日のLL PlanetでV8の文字列結合が爆速という話が

なんとC++より速いらしい。

そんな。まさか。

-> V8の文字列はropeらしい

rope?

文字列結合にだけ注目すると、結合を遅延評価する文字列といえる

V8が高速なのは別にJITのせいではなく文字列の特性によるものだと思われる

ならば、C++でropeを使えば速いのでは！

g++のrope -> std::stringより遅い

よろしいならば実装だ

素朴なropeとは、変更不能文字列のリファレンスのリストだ！

class rope {
    deque< shared_ptr<const string> > strlist;
};

ベンチマーク

確かにropeの方が高速になった

以下略


